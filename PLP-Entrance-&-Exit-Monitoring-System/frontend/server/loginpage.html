<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PLP Facial Monitor | Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="../images/logosmallplp.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }

        body{
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            background:
                linear-gradient(rgba(10,123,61,.75), rgba(37,99,45,.75), rgba(255,222,89,.75)),
                url("../images/admin-loginpage.png") center/cover no-repeat;
        }

        .login-box {
            width: 380px;
            background: #fff;
            padding: 70px 32px 36px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 35px rgba(0,0,0,.25);
            position: relative;
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .login-box.fade-out {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .logo {
            position: absolute;
            top: -55px;
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 110px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 20px rgba(0,0,0,.25);
        }

        .logo img { width: 85%; }

        h2 { font-size:1.6rem; font-weight:700; margin-bottom:4px; }
        .subtitle { font-size:.9rem; color:#666; margin-bottom:22px; }

        .input-group { margin-bottom:16px; text-align:left; }
        .input-group input {
            width:100%; padding:12px 14px; border:1px solid #ccc; border-radius:6px; font-size:.9rem;
        }
        .input-group input:focus { outline:none; border-color:#0a7c3c; }

        .input-wrapper { position: relative; }
        .toggle-password {
            position:absolute; right:12px; top:50%; transform:translateY(-50%);
            cursor:pointer; color:#555;
        }

        .options {
            display:flex; justify-content:space-between; align-items:center;
            font-size:.85rem; margin:12px 0 22px;
        }
        .options a { color:#0a7c3c; text-decoration:none; }

        .login-btn {
            width:100%; padding:12px; border:none; background:#0a7c3c;
            color:#fff; font-weight:600; border-radius:4px; cursor:pointer;
            transition:.2s; margin-bottom:10px;
        }
        .login-btn:hover { background:#096a33; }

        .signup { margin-top:14px; font-size:.85rem; }
        .signup a { font-weight:600; color:#000; text-decoration:none; }

        /* Inline error message */
        #loginError {
            color: red;
            font-size: 0.85rem;
            margin-bottom: 10px;
            display: none;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: linear-gradient(rgba(10,123,61,.9), rgba(37,99,45,.9), rgba(218,189,76,.9)),
                        url("../images/admin-loginpage.png") center/cover no-repeat;
            z-index:1000; display:none;
            flex-direction:column; align-items:center; justify-content:center; text-align:center; color:white;
        }
        .loading-logo { width:150px; height:150px; background:white; border-radius:50%; padding:10px; margin-bottom:30px; }
        .welcome-text { font-family:'Great Vibes', cursive; font-size:4rem; color:#ffde59; }
        .main-title { font-size:3.5rem; font-weight:800; text-transform:uppercase; letter-spacing:2px; margin-top:-15px; }
        .progress-container { width:300px; height:8px; background:rgba(255,255,255,0.2); border-radius:10px; margin-top:40px; overflow:hidden; }
        .progress-bar { height:100%; width:0%; background:#ffde59; border-radius:10px; }
        .loading-status { margin-top:15px; font-size:0.9rem; }

        @media(max-width:768px){
            .login-box { width:90%; }
            .welcome-text { font-size:2.5rem; }
            .main-title { font-size:2rem; }
            .loading-logo { width:100px; height:100px; }
        }
    </style>
</head>
<body>

    <div class="login-box" id="loginBox">
    <div class="logo">
        <img src="../images/logo.png" alt="PLP Logo">
    </div>

    <h2>Welcome</h2>
    <p class="subtitle">Please enter your PLP Gmail account</p>

    <form id="loginForm">
        <div class="input-group">
            <input type="email" id="email" placeholder="Email" required>
        </div>

        <div class="input-group">
            <div class="input-wrapper">
                <input type="password" id="password" placeholder="Password" required>
                <i class="fa-solid fa-eye-slash toggle-password"></i>
            </div>
        </div>

        <!-- Inline error message -->
        <p id="loginError"></p>

        <div class="options">
            <label><input type="checkbox"> Remember me</label>
            <a href="../server/forgotpasswordpage.html">Forgot Password?</a>
        </div>

        <button type="submit" class="login-btn">Log In</button>

        <p class="signup">New here? <a href="../server/signuppage.html">Create an account.</a></p>
    </form>
    </div>

    <div id="loading-screen">
        <div class="loading-logo">
            <img src="../images/logo.png" style="width:100%;">
        </div>
        <h1 class="welcome-text">Welcome to</h1>
        <h2 class="main-title">PLP FACIAL MONITOR</h2>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <p class="loading-status" id="statusText">Starting System...</p>
    </div>

<script>
$(function(){

    // Password toggle
    $(".toggle-password").on("click", function(){
        const input = $("#password");
        const isPassword = input.attr("type") === "password";
        input.attr("type", isPassword ? "text" : "password");
        $(this).toggleClass("fa-eye fa-eye-slash");
    });

 // Login submission
$("#loginForm").on("submit", function(e){
    e.preventDefault();

    const email = $("#email").val();
    const password = $("#password").val();

    const account = JSON.parse(localStorage.getItem("plpAccount"));

    if(account && email === account.email && password === account.password){

        $("#loginError").hide();
        $("#loginBox").addClass("fade-out");

        setTimeout(()=>{
            $("#loginBox").hide();
            $("#loading-screen").css("display","flex");
            startLoading();
        },400);

    } else {
        $("#loginError").text("Invalid credentials!").fadeIn();
    }
});

    function startLoading(){
        let progress = 0;
        const interval = setInterval(function(){
            progress += 10;
            if(progress>100) progress=100;

            $("#progressBar").css("width",progress+"%");

            if(progress>=100){
                clearInterval(interval);
                setTimeout(()=>{ window.location.href='dashboardpage.html'; },500);
            }
        },200);
    }

});
</script>

</body>
</html>